/**
 * videojs-http-source-selector
 * @version 1.2.0
 * @copyright 2019 Justin Fujita <Justin@pivotshare.com>
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsHttpSourceSelector=t(e.videojs)}(this,function(o){"use strict";o=o&&o.hasOwnProperty("default")?o.default:o;var s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(n){function r(e,t){s(this,r);var o=u(this,n.call(this,e,t));return o.selectable=!0,o.update(),o}return e(r,n),r.prototype.handleClick=function(){for(var e=this.player().qualityLevels(),t=0;t<e.length;t++)this.options_.index===t?e[t].enabled=!0:e[t].enabled=!1;this.options_.controller.triggerItemUpdate()},r.prototype.update=function(){var e=this.player().qualityLevels();this.selected(e[this.options_.index].enabled)},r}(o.getComponent("MenuItem")),t=o.getComponent("MenuButton"),n=function(r){function i(e,t){s(this,i);var o=u(this,r.call(this,e,t)),n=o.player().qualityLevels();return t&&t.default&&("low"===t.default?n.forEach(function(e,t){e.enabled=0===t}):"high"===t.default&&n.forEach(function(e,t){e.enabled=n.length-1==0})),o}return e(i,r),i.prototype.createEl=function(){return o.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},i.prototype.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},i.prototype.triggerItemUpdate=function(){this.menuItems.forEach(function(e){return e.update()})},i.prototype.createItems=function(){var e=this.player().qualityLevels();this.menuItems=[];for(var t=0;t<e.length;t++){var o=t,n=o;e[o].sortVal?n=parseInt(e[o].sortVal,10):e[o].height?n=parseInt(e[o].height,10):e[o].bitrate&&(n=parseInt(e[o].bitrate,10)),this.menuItems.push(new l(this.player_,{index:o,sortVal:n,controller:this,label:e[o].id}))}return this.menuItems.sort(function(e,t){return e.options_.sortVal<t.options_.sortVal?1:e.options_.sortVal>t.options_.sortVal?-1:0}),this.menuItems},i}(t),r={},i=o.registerPlugin||o.plugin,a=function(e){var t=this;this.ready(function(){!function(n,e){if(n.addClass("vjs-http-source-selector"),"Html5"!==n.techName_)return;n.on(["loadedmetadata"],function(e){if("undefined"!==n.videojs_http_source_selector_initialized&&!0!==n.videojs_http_source_selector_initialized){n.videojs_http_source_selector_initialized=!0;var t=n.controlBar,o=t.getChild("fullscreenToggle").el();t.el().insertBefore(t.addChild("SourceMenuButton").el(),o)}})}(t,o.mergeOptions(r,e))}),o.registerComponent("SourceMenuButton",n),o.registerComponent("SourceMenuItem",l)};return i("httpSourceSelector",a),a.VERSION="1.2.0",a});